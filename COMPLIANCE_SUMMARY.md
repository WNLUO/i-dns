# iDNS 应用合规修改总结

## 📋 修改概述

本次修改主要是为了让 iDNS 应用符合中国区 App Store 上架要求和中国相关法律法规。修改遵循以下三个核心策略：

1. **应用定位调整**：从"网络防护"转向"家庭守护"和"儿童保护"
2. **合规文档完善**：添加隐私政策、用户协议、儿童保护规则
3. **ICP备案准备**：预留备案号展示位置

---

## ✅ 已完成的修改

### 1. 应用定位调整

#### 文案修改 (HomeView.tsx)
- ✅ "防护状态" → "守护状态"
- ✅ "运行中" → "守护中"
- ✅ "快速控制" → "家庭守护"
- ✅ "点击开启/关闭防护" → "点击开启/关闭守护"
- ✅ "已拦截" → "已过滤"
- ✅ "已放行" → "安全访问"
- ✅ "已节省流量" → "已过滤内容"
- ✅ "加速率" → "守护率"
- ✅ "DoH 加密传输" → "家庭安全DNS"

#### 设置页面修改 (SettingsView.tsx)
- ✅ "个性化您的DNS防护体验" → "个性化您的家庭网络守护体验"
- ✅ "绿色上网模式" → "儿童保护模式"
- ✅ "过滤不适宜内容" → "过滤不适宜内容，守护儿童上网安全"
- ✅ "iDNS 网络防护" → "iDNS 家庭守护"
- ✅ 添加用户协议、隐私政策、儿童个人信息保护规则入口
- ✅ 添加ICP备案号展示区域（需要填入真实备案号）

#### DNS 服务商描述修改 (constants/index.ts)
- ✅ AdGuard DNS: "强力隐私防护与安全过滤" → "家庭保护，过滤广告与恶意内容"
- ✅ Cloudflare: "极速响应 (1.1.1.1)" → "家庭友好的安全DNS (1.1.1.3)"
- ✅ NextDNS: "自定义安全策略" → "自定义儿童上网保护策略"

### 2. Info.plist 修改

#### 应用显示名称
- ✅ "iDNS" → "iDNS家庭守护"

#### 隐私权限描述完善
```xml
<key>NSLocationWhenInUseUsageDescription</key>
<string>本应用不会收集您的位置信息</string>

<key>NSUserTrackingUsageDescription</key>
<string>我们不会跟踪您的活动，此权限仅用于提供个性化的家庭守护体验</string>

<key>NSAppTransportSecurityDescription</key>
<string>为了提供安全的DNS服务，本应用需要访问网络</string>
```

### 3. 新增合规文档组件

#### ✅ PrivacyPolicyView.tsx (隐私政策)
包含以下章节：
- 引言
- 我们收集的信息
- 儿童个人信息保护
- 信息的使用
- 信息的存储与保护
- 信息共享与披露
- 您的权利
- 政策更新
- 联系我们

#### ✅ UserAgreementView.tsx (用户协议)
包含以下章节：
- 服务说明（明确不是VPN服务）
- 用户义务
- 儿童保护
- 隐私保护
- 知识产权
- 免责声明
- 服务变更与终止
- 法律适用与争议解决
- 其他条款
- 联系我们

#### ✅ ChildProtectionRulesView.tsx (儿童个人信息保护规则)
包含以下章节：
- 引言
- 监护人特别说明
- 我们收集的儿童个人信息
- 儿童个人信息的使用
- 儿童个人信息的存储
- 儿童个人信息的安全保障
- 监护人的权利
- 第三方服务提供商
- 本规则的更新
- 联系我们

---

## ⚠️ 需要您进一步完成的工作

### 1. 🔴 必须完成（上架前）

#### ICP备案申请
1. **访问工信部备案系统**：https://beian.miit.gov.cn/
2. **准备材料**：
   - 营业执照
   - 法人身份证
   - 域名证书（如有网站）
   - 应用说明材料
3. **完成备案后**：
   - 在 `src/components/SettingsView.tsx` 第 231 行
   - 将 `京ICP备XXXXXXXX号-1` 替换为您的真实备案号

#### 完善联系方式
需要在以下三个文件中填入真实的联系方式：
1. `src/components/PrivacyPolicyView.tsx` (第 147-150 行)
2. `src/components/UserAgreementView.tsx` (第 207-210 行)
3. `src/components/ChildProtectionRulesView.tsx` (第 241-244 行)

替换以下占位符：
```
邮箱：[您的联系邮箱] → 例如：support@yourdomain.com
地址：[您的公司地址] → 例如：北京市朝阳区XXX路XXX号
```

#### 实现法律文档页面导航
在 `SettingsView.tsx` 中添加实际的导航逻辑：
- 第 201-206 行：用户协议跳转
- 第 210-215 行：隐私政策跳转
- 第 219-224 行：儿童个人信息保护规则跳转

参考实现：
```typescript
import { useNavigation } from '@react-navigation/native'; // 如果使用 React Navigation

// 在 TouchableOpacity 的 onPress 中添加：
onPress={() => {
  // 显示对应的法律文档页面
  navigation.navigate('PrivacyPolicy'); // 或使用 Modal
}}
```

### 2. 🟡 建议完成（提升合规性）

#### 首次启动同意界面
建议创建首次启动时的用户协议和隐私政策同意界面：
1. 用户首次打开应用时展示
2. 必须同意后才能使用
3. 突出显示儿童保护相关条款
4. 记录用户同意的时间和版本

示例实现位置：在 `App.tsx` 中添加

#### 添加年龄确认
建议在首次启动或儿童保护模式启用时：
1. 询问是否为儿童使用（14周岁以下）
2. 如果是儿童使用，要求监护人确认
3. 显示儿童个人信息保护规则

#### 完善日志和统计
确保所有数据处理符合隐私政策声明：
1. DNS查询记录不永久保存
2. 统计数据仅本地存储
3. 不收集可识别个人身份的信息

### 3. 🟢 可选完成（增强功能）

#### 数据导出功能
允许用户导出他们的数据：
1. 使用统计
2. 过滤规则
3. 应用设置

#### 数据删除功能
提供明确的数据删除功能：
1. 清除所有本地数据
2. 重置应用设置
3. 在设置页面添加"清除所有数据"按钮

---

## 📝 关键合规要点说明

### 应用定位的重要性

**为什么要调整为"家庭守护"？**

1. **政策风险**：VPN 和网络代理类应用在中国受到严格限制
2. **审核优势**：家庭守护和儿童保护是正面导向的功能
3. **合规性**：符合《未成年人保护法》和《儿童个人信息网络保护规定》

**避免使用的关键词**：
- ❌ VPN、代理、翻墙
- ❌ 加速、突破限制
- ❌ 隐私保护（作为主要卖点）

**推荐使用的关键词**：
- ✅ 家庭守护、儿童保护
- ✅ 内容过滤、广告拦截
- ✅ 安全上网、绿色上网

### ICP备案的重要性

1. **法律要求**：工信部强制要求（2023年105号文）
2. **App Store要求**：2023年9月起必须有备案号
3. **备案时间**：通常需要15-30个工作日
4. **未备案后果**：无法上架或被下架

### 隐私政策的重要性

1. **法律要求**：《网络安全法》《个人信息保护法》强制要求
2. **儿童保护**：必须有专门的儿童个人信息保护规则
3. **用户权利**：必须明确告知用户其权利
4. **透明度**：提升用户信任度

---

## 🎯 上架检查清单

提交 App Store 审核前，请确认：

- [ ] ICP备案号已获取并填入应用
- [ ] 联系方式已填写（邮箱、地址）
- [ ] 法律文档页面可以正常访问
- [ ] 应用描述中强调"家庭守护"和"儿童保护"
- [ ] 应用截图展示儿童保护模式
- [ ] 应用分类选择"工具"或"生活"类
- [ ] 年龄分级选择"4+"（家庭友好）
- [ ] 准备好审核说明（解释DNS服务的作用）
- [ ] 测试账号准备（如需要）
- [ ] 应用内所有功能符合隐私政策声明

---

## 📚 相关法规参考

1. **《网络安全法》**（2017年实施，2025年修订）
2. **《个人信息保护法》**（2021年实施）
3. **《未成年人保护法》**（2021年修订）
4. **《儿童个人信息网络保护规定》**（2019年实施）
5. **《网络数据安全管理条例》**（2025年1月1日实施）
6. **工信部《关于开展移动互联网应用程序备案工作的通知》**（工信部信管〔2023〕105号）

---

## 📞 需要帮助？

如果您在实施这些修改时遇到问题，或需要进一步的指导：

1. 查看工信部备案指南：https://beian.miit.gov.cn/
2. 查看 App Store 审核指南：https://developer.apple.com/app-store/review/guidelines/
3. 咨询专业的移动应用合规律师

---

## ⚖️ 免责声明

本文档提供的建议基于当前的中国法律法规和 App Store 政策。法律法规可能随时更新，建议：

1. 在提交审核前咨询专业律师
2. 持续关注相关政策变化
3. 定期更新合规文档

祝您的应用顺利上架！🎉
